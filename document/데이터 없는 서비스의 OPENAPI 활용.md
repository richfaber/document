# 웹서비스의 추천 알고리즘


## 필요

웹서비스는 방문한 사용자에게 맞춤형 제안을 제공해야 한다.

왜냐하면 사용자는 목적을 이루지 못하거나, 과정이 어렵다면 이탈율과 재방문의 의사가 없어질 것이고, 잘 되어있는 UX 구조여도 결국 단계를 밟아가야 하는 과정이 있기 때문에, 적절한 제안을 잘 제시해 주는 것은 이탈율과 트래픽 저하를 방어하는 좋은 방법이기 때문이다.

예를 들어 `국내여행정보를 얻으려는 사용자` 는 `웹서비스가 전략적으로 배치하고 있는 해외여행정보` 를 피해서 국내여행 정보를 탐색하기 시작할 것이고, 정보를 얻으면 모르겠지만, 그 마저 얻지 못한다면, 이탈 후의 재방문은 기대하기 어렵다.

좋은 웹서비스는 사용자의 목적을 달성하는 과정이 단순하고 짧을수록 좋고, 맞춤형 제안은 목적에 도달하는 과정을 획기적으로 줄여 준다.

방문한 사용자에 대한 정보가 있으면 적절한 맞춤형 제안을 할 수 있지만, 없다는 가정하에 보완할 방법에 초점을 두었다. 


## 구체적 접근

사용자에게 노출되는 모든 목록을 맞춤형으로 구성하는 서비스들이 있다. 

예를들어 동영상 서비스(넷플릭스, 푹, 유튜브 라이브)는 전략적 방향이 `사용자에게 맞는 컨텐츠 추천` 으로 느껴진다. 
그것을 반증하는 것이 수많은 카테고리를 진열하고 있음에도 불구하고, `사용자에게 추천` 이라는 별개의 카테고리를 최상단에 배치하고 있다는 것으로도 알 수 있다.


### 사용자 추천 알고리즘


#### Collaborative Filtering (CF)

`내가 남긴 평점 데이터를 가지고 나와 취향이 비슷한 사람이 선호하는 아이템을 추천` 한다.
단점은 서비스 초기에 데이터가 없으면 사용할 수 없는 방법이다.


##### User-based CF

`사용자간의 유사도를 계산하여 다른 사용자의 목록을 보여주는 방식` 이다.
사용자의 평가데이터를 행렬로 분류하고 공유점을 계산하는 방식

- [nodeml](https://www.npmjs.com/package/nodeml)

1. 특정 사용자가 본 영화 목록을 불러온다
2. 영화 목록을 본 다른 사용자를 불러온다
3. 검색된 사용자가 본 영화 목록을 바탕으로 사용자간 유사도를 Inner Product를 통해 구한다.
4. 계산된 사용자들의 영화 목록을 불러온 후 사용자 유사도 점수를 바탕으로 해당 영화들의 점수를 구한다.
5. 계산된 점수를 바탕으로 내림차순으로 정렬하여 높은 점수의 영화 n개를 추천한다.


##### Item-based CF

`아이템간의 유사도를 계산하는 방식` 이다.
사용자가 아이템을 조회할 경우 유사아이템을 보여주는 방식인데, 아이템이 부족할 경우 정확도가 떨어진다.

- 아마존


#### Content-based Filtering

아이템이나 유저를 분석하지 않고, 컨텐츠 자체를 분석한다. 그것을 사용자 프로필이나 행적과 연결하여 추천한다.

- 사용자가 삼성과 갤럭시에 관한 뉴스를 보았다면, 기사의 핵심 엔티티가 '삼성, 갤럭시' 라는 것을 분석하고, 이 기반의 새로운 뉴스를 추천한다.


#### Hybrid Filtering

##### Combining Filtering

##### Collaboration via Content


#### 넷플릭스 알고리즘

사용자는 가입 시 재밌게 보았던 컨텐츠 3개를 고른다. 
이 3개의 컨텐츠에는 몇가지의 태그가 부여되어 있고, 태그를 바탕으로 알고리즘을 통해서 사용자에게 추천한다.

태그는 `눈물자극, 감성충만, 아드레날린 폭발, 볼입감 최고, 고통받는 천재, 실화바탕` 등의 아주 구체적 태그들로 이루어 진다. 이런 태그들은 `태거` 라는 넷플릭스팀에 의해서 기입된다. 국가별로 정서적으로 알맞는 태그를 기입하기 위해서, 현지화 수준의 네이티브가 가능한 사람들로 구성한다.

넷플릭스는 명시적 데이터보다 `암시적 데이터가 인간의 행동을 결정` 한다는 개념을 바탕으로 알고리즘을 개발한다.

이런 방법 또한, 초기에는 3개의 컨텐츠를 바탕으로 추천해 주기 때문에, 추천정확도는 떨어지지만, 시간이 흐르면 자연스럽게 정확도가 올라간다.

(넷플릭스를 6개월 써봤지만, 나에게 맞는 추천을 받았다고 생각하지 못한것은 내가 남들보다 덜 사용했기 때문일까??)




#### 유튜브 라이브


### 사용자 데이터를 흡수하기

나의 웹서비스에 `방문사용자 데이터` 가 없기 때문에, `일반적 데이터를 흡수하여 ???통계방법` 하는 방법에 초점을 둔다. 


#### 데이터 구매

- 어디서 구매할 수 있지?


#### 정보를 최대한 활용

방문자에게 얻을 수 있는 최대한의 정보와 OPENAPI를 활용하여, 조합하고 결론을 구하는 알고리즘을 만든다.


##### 브라우저가 제공하는 정보

- 접속위치(*)
- 데스크탑/모바일 구분(*)

##### OPENAPI 정보수집

- 세대별
- 성별 
- 오늘의 날씨
- 사회이슈
- 요일별 검색키워드
- 실시간 핫이슈
- 불만
- 좋아함
- 


##### A/B 테스트

한번은 사용자의 통계가 필요하겠지만, 빠르게 수집/반영할 수 있는 방법중에 이만한게 없다.



##### OPENAPI 매시업 사례

- TwitPic - Making Actual Money!
- Square Root Calculator - Doing One Thing Right!
- 10 Camera - Focusing on the Specific Stuffs
- 10 Fascinating Googlers - There are many interesting data near you!
- \#haiku - Squeezing Fun out of the Chunk
- 100 Destinations - People dig travel pictures!
- 140 blood for twitter - Twitter can play, too!
- 2012twit - I did it first!
- 5 dollar auction deals - Price itself makes things interesting.
- Bubblr - This is how to build an equity!



### 명확한 카테고리 접근하기

사용자가 인지하기 좋은 형태의 카테고리 분류법

http://www.goldenplanet.co.kr/blog/2016/02/16/%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EA%B0%80%EC%B9%98%EB%A5%BC-%EB%A7%8C%EB%93%9C%EB%8A%94-7%EA%B0%80%EC%A7%80-%EB%B9%85%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B8%B0%EB%B2%95/


서비스 성격에 맞는 카테고리를 잘 선별하여 배치하면, 사용자에게 도움이 된다.

- 카테고리 기법1
- 카테고리 기법2
- 카테고리 기법3



## 여행 웹서비스 적용 시뮬레이션

다양한 서비스가 있지만, 시뮬레이션테마 로 여행관련 웹서비스 라는 가정하에, 시나리오를 작성한다.




http://www.goldenplanet.co.kr/blog/2019/02/27/2019%eb%85%84-%eb%8d%b0%ec%9d%b4%ed%84%b0-%eb%94%94%ec%a7%80%ed%84%b8-%eb%a7%88%ec%bc%80%ed%8c%85-%ed%8a%b8%eb%9e%9c%eb%93%9c/

https://www.google.com/search?newwindow=1&q=%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC+%EB%B6%84%EB%A5%98%EA%B8%B0%EB%B2%95&tbm=isch&source=univ&client=firefox-b-d&sa=X&ved=2ahUKEwj3z7XgoYHkAhUQ7WEKHYReC04QsAR6BAgJEAE#imgrc=XqqMM8ah61v-YM:

http://www.goldenplanet.co.kr/blog/2019/05/14/%eb%8d%b0%ec%9d%b4%ed%84%b0-%ea%b8%b0%eb%b0%98-%eb%a7%88%ec%bc%80%ed%8c%85-%ec%88%98%ed%96%89%ec%9d%84-%ec%9c%84%ed%95%9c-%ed%95%b5%ec%8b%ac-4%ea%b0%80%ec%a7%80-%ed%95%b5%ec%8b%ac%ec%9a%94%ec%86%8c/



* as-is 데이터(서비스)가 있는 상태에서 분석 -> 발전
brunch.co.kr/@beusable/161

* 프로토타입 만들어서 테스트 -> 발전
https://brunch.co.kr/@hmin0606/17

*해당 서비스를 쓸것 같은 사용자들 불러 놓고 같이 아이데이션 -> 발전
https://blog.prototypr.io/the-category-ideation-method-804cd5622974