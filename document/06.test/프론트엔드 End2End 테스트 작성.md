# Vue-CLI 와 Cypress 를 이용한 테스트 작성


## 소프트웨어 관점의 테스트


### 정적(Static)

코드를 실행시키지 않고 테스트를 하는 것

Type 에러나 Reference 에러와 같은 개발자의 실수로 인해 발생하는 에러등을 검출한다.


### 단위(Unit) 

각 모듈을 단독 실행 환경에서 독립적으로 테스트 하는 것

- Sociable 테스트 : 의존성 있는 코드와 함께 테스트
- Solitary 테스트 : 모듈에 의해 실행되는 코드를 `테스트 더블` 로 대체

프론트엔드에서 단위 테스트는 특정 컴포넌트를 렌더링 해서 꺠지지 않는지를 확인하는 것.

Sociable 테스트는 자식 컴포넌트 포함해서 렌더링 되는지를 테스트 하는 것이고,
Solitary 테스트는 자식 컴포넌트를 가상으로 작성하여 렌더링 하는 것이다.


### 통합(Integration)

두개 이상의 모듈이 실제 연결된 상태에서 동작이 정상인지를 테스트 하는 것

단위 테스트보다 비교적 넓은 범위 테스트 이다.

단위 테스트와 마찬가지로, 테스트더블 사용여부에 따라 `broad test` 와 `narrow test` 로 구분되고, `braod test` 는 의존성 있는 모든 모듈이 연결된 상태에서 테스트를 하고, `narrow test` 는 연결되는 모듈을 `테스트 더블` 로 대체하여 테스트 하는 것이다.

프론트엔드에서 통합 테스트는 UI와 API 간의 상호작용이 올바르게 일어나는지, 상태값에 따라 UI 변경이 올바르게 동작하는지를 확인 하는 것.

여기서도 `broad test, narrow test`를 구분할 수 있는데, 실 사용되는 API 서버와 통신하며 확인하는 `braod test`, 가상 API 서버와 통신하며 확인하는 `narrow test` 로 구분할 수 있다.


### E2E(End to End)

실제 사용자의 입장 및 환경에서 확인 하는 것이다.

프론트엔드에서 E2E테스트는 실제 브라우저를 실행해서 테스트 하는 것이므로, 커버리지가 높고, 실제 상황에서 발생할 수 있는 에러를 검출하는데 도움이 된다.

또한 브라우저를 띄우기 때문에 Web API 활용이 가능하다.

다만 브라우저를 띄우는 방식이므로, 단위/통합 테스트에 비해 오래 걸리고, 버그로 검출된 내용이 확인이 진행되고 있는 브라우저 자체버그 라던지, 네트워크 지연문제 등의 `기타 가능성` 이 발생할 수 있다. 


## 프론트엔드 관점의 테스트

### 하는 일

프론트엔드 개발자의 작업은 이렇게 진행된다. 

1. 전달받은 디자인을 보고 HTML 마크업을 한 뒤 CSS 로 스타일을 입히는 작업을 수행한다.
2. 사용자의 상호작용을 위한 이벤트를 처리한다.
3. API 서버와 통신하여 애플리케이션 데이터 동기화 작업을 진행한다.

작업단계를 보면, 가능한 테스트의 주제를 아래와 같이 나누어 볼 수 있다.

- 시각적 요소
- 사용자 이벤트 처리
- API 서버통신


### 테스트 환경

프론트엔드 테스트 환경에 어떤 것들이 있는지 확인해 보자.

#### 브라우저 환경

브라우저 환경에서 테스트 코드를 실행하면 모든 `Web API` 에 접근할 수 있다.
또한 즉각적으로 다양한 브라우저에서 확인이 가능하기 때문에, 호환성 테스트 하기 좋다는 장점이 있다.

하지만 브라우저가 `Node.js` 프로세스에 비해서는 무겁다. 대안으로 GUI 가 없는 `Headless 모드` 로 테스트 하는 것이 권장되고 있다.

#### Node.js 환경

브라우저에 비해 속도가 빠르지만, Web API, DOM 접근 API 를 사용하지 못한다. 대안으로 DOM 을 가상으로 구현하는 라이브러리를 활용하지만, 페이지 내비게이션, 레이아웃 테스트 같은 것들은 할 수 없다는 제약이 있다.
또한 크로스 브라우징 같은 다양한 환경 테스트도 할 수 없다.


## Cypress 설치


탭이 안됨: https://github.com/Bkucera/cypress-plugin-tab